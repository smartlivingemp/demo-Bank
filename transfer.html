<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customer Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f0f2f5;
    }
    table td, table th {
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container py-4">
    <h2 class="mb-4 text-center">üè¶ Customer Account Management</h2>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div><strong>Total Customers:</strong> 20</div>
      <button class="btn btn-outline-dark btn-sm" onclick="location.reload()">
        <i class="bi bi-arrow-clockwise"></i> Refresh
      </button>
    </div>
    <div class="table-responsive">
      <table class="table table-bordered table-hover table-striped align-middle shadow-sm">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Customer Name</th>
            <th>Account Number</th>
            <th>Balance (GHS)</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="customer-table">
          <!-- Table rows will be generated by JavaScript -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Transfer Modal -->
  <div class="modal fade" id="transferModal" tabindex="-1" aria-labelledby="transferModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="transferModalLabel">Transfer Funds</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="transferForm">
            <input type="hidden" id="senderId" />
            <div class="mb-3">
              <label for="recipientId" class="form-label">Recipient Customer Number (1‚Äì20)</label>
              <input type="number" class="form-control" id="recipientId" required />
            </div>
            <div class="mb-3">
              <label for="amount" class="form-label">Amount (GHS)</label>
              <input type="number" class="form-control" id="amount" required />
            </div>
            <button type="submit" class="btn btn-primary w-100">Confirm Transfer</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- App Logic -->
  <script>
    const customers = [
      "Grace Mensah", "Kwame Boateng", "Akosua Adom", "Yaw Owusu", "Abena Serwaa",
      "Kojo Antwi", "Esi Hammond", "Daniel Ofori", "Ama Agyeman", "Nana Kofi",
      "Linda Asare", "Yaw Sarfo", "Martha Nyarko", "Samuel Addo", "Beatrice Osei",
      "Michael Tetteh", "Cynthia Obeng", "Felix Appiah", "Naana Bruce", "Francis Yeboah"
    ];

    const table = document.getElementById('customer-table');

    function loadBalances() {
      let balances = JSON.parse(localStorage.getItem('balances')) || {};
      customers.forEach((name, i) => {
        const id = i + 1;
        if (!balances[id]) balances[id] = 1200 + id * 250;
        const row = `<tr>
          <td>${id}</td>
          <td>${name}</td>
          <td>01123456${String(id).padStart(2, '0')}</td>
          <td id="balance-${id}">${balances[id].toFixed(2)}</td>
          <td><button class="btn btn-sm btn-success" onclick="openModal(${id})">Transfer</button></td>
        </tr>`;
        table.insertAdjacentHTML('beforeend', row);
      });
      localStorage.setItem('balances', JSON.stringify(balances));
    }

    function openModal(senderId) {
      document.getElementById('senderId').value = senderId;
      const modal = new bootstrap.Modal(document.getElementById('transferModal'));
      modal.show();
    }

    document.getElementById('transferForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const senderId = parseInt(document.getElementById('senderId').value);
      const receiverId = parseInt(document.getElementById('recipientId').value);
      const amount = parseFloat(document.getElementById('amount').value);

      if (senderId === receiverId || receiverId < 1 || receiverId > 20 || amount <= 0 || isNaN(amount)) {
        alert("‚ùå Invalid transfer details.");
        return;
      }

      let balances = JSON.parse(localStorage.getItem('balances'));
      if (balances[senderId] >= amount) {
        balances[senderId] -= amount;
        balances[receiverId] += amount;
        localStorage.setItem('balances', JSON.stringify(balances));
        document.getElementById('balance-' + senderId).innerText = balances[senderId].toFixed(2);
        document.getElementById('balance-' + receiverId).innerText = balances[receiverId].toFixed(2);
        bootstrap.Modal.getInstance(document.getElementById('transferModal')).hide();
        alert(`‚úî GHS ${amount.toFixed(2)} transferred from Customer ${senderId} to Customer ${receiverId}`);
        this.reset();
      } else {
        alert("‚ùå Insufficient funds.");
      }
    });

    loadBalances();
  </script>
</body>
</html>
